<!-- templates/registration/login.html -->
{% extends 'base.html' %}

{% block content %}

<style>
img {
  width: 100%;
  height: auto;
}

</style>

<h2 id="final_pattern_message">Can you remember the pattern from before?</h2>

{% load static %}


{% block form_start_html_tag %}
{% endblock %}
<div class="row no-gutters">
    {% for i in '123'|make_list %}
        <div class="col-sm-1">
        	<div id="div_box_{{ i }}"><img src="{% static 'doorgame/box_empty.png' %}" id="box_{{ i }}_image" alt="box_{{ i }}">
        	</div>
        	<label for="box_{{ i }}">Box {{ i}}</label><input type="checkbox" id="box_{{ i }}" value="True" name="box_{{ i }}"></input>
        </div>
    {% endfor %}
</div>
<div class="row no-gutters">
    {% for i in '456'|make_list %}
        <div class="col-sm-1">
            <div id="div_box_{{ i }}"><img src="{% static 'doorgame/box_empty.png' %}" id="box_{{ i }}_image" alt="box_{{ i }}">
            </div>
            <label for="box_{{ i }}">Box {{ i}}</label><input type="checkbox" id="box_{{ i }}" value="True" name="box_{{ i }}"></input>
        </div>
    {% endfor %}
</div>
<div class="row no-gutters">
    {% for i in '789'|make_list %}
        <div class="col-sm-1">
            <div id="div_box_{{ i }}"><img src="{% static 'doorgame/box_empty.png' %}" id="box_{{ i }}_image" alt="box_{{ i }}">
            </div>
            <label for="box_{{ i }}">Box {{ i}}</label><input type="checkbox" id="box_{{ i }}" value="True" name="box_{{ i }}"></input>
        </div>
    {% endfor %}
</div>
	
    {% block submit_button %}

    {% endblock %}
{% block close_form_tag %}

{% endblock %}

{% if user.is_authenticated %}

<!-- Add content here - May have to deal with logged in/ not logged in problem -->
<p><a href="{% url 'logout' %}" id="logout_link_anchor">logout</a></p>

{% else %}
  <p>You are not logged in</p>
  <a href="{% url 'login' %}" id="login_link_anchor">login</a>
{% endif %}
<script>
document.addEventListener("DOMContentLoaded", function (event) {
    
    var _selectors = [];
    for (let i = 1; i <10; i++) {
        _selectors[i] = document.querySelector('input[name=box_'+ i.toString() + ']')
        _selectors[i].addEventListener('change', function (event) {
            if (_selectors[i].checked) {
                document.getElementById("div_box_" + 
                     i.toString()).innerHTML = '<img src="/static/doorgame/box_with_dot.png" id="box_'+i.toString()+'_image" alt="box_'+i.toString()+'">'
            } else {
                document.getElementById("div_box_" + i.toString()).innerHTML = '<img src="/static/doorgame/box_empty.png" id="box_'+i.toString()+'_image" alt="box_'+i.toString()+'">'
            }
        });

    };
});


</script>

{% endblock %}